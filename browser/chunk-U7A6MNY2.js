import{a as U}from"./chunk-AJZXPOTM.js";import"./chunk-TVLHVE3P.js";import{a as R}from"./chunk-UGHFU27J.js";import"./chunk-LEWYKQGU.js";import{$ as v,A as h,B as g,Da as V,Ea as M,Ga as A,I as T,Ia as D,J as s,M as H,Ma as I,Oa as N,Q as b,T as o,W as r,X as n,Y as u,aa as x,ba as p,e as S,h as E,ia as d,j as y,ka as O,l as L,t as P,w as c,wa as k,y as m,z as f}from"./chunk-MMKYUMEW.js";import{a as C,b as w}from"./chunk-EQDQRRRY.js";var _=class t{http=c(D);basePath="manuales/gallegos_nuevos";manuals=[{title:"Introducci\xF3n al sistema",path:"1-INTRODUCCION-PORTAL-DE-PROVEEDORES.pdf"},{title:"Consultar detalle de proveedor",path:"2-CONSULTAR-DETALLE-DE-PROVEEDOR.pdf"},{title:"Consultar Manuales de ayuda",path:"3-CONSULTAR-AYUDAS.pdf"},{title:"Secci\xF3n de contacto",path:"4-CONTACTO.pdf"},{title:"Consultar conceptos del SAT",path:"5-CONSULTAR-CONCEPTOS-DEL-SAT.pdf"},{title:"Consultar estado de cuenta",path:"6-CONSULTAR-ESTADO-DE-CUENTA.pdf"},{title:"Secci\xF3n de facturas",path:"7-SECCION-FACTURAS.pdf"},{title:"Secci\xF3n de \xF3rdenes de compra",path:"8-SECCION-ORDENES-DE-COMPRA.pdf"},{title:"Secci\xF3n de complementos de pago",path:"9-SECCION-COMPLEMENTOS-DE-PAGO.pdf"}];checkManual(i){return y(()=>this.http.head(i.path,{observe:"response"})).pipe(E(e=>e.status===200),L(()=>S(!1)))}getManuals(){return this.manuals.map(i=>w(C({},i),{path:`${this.basePath}/${i.path}`}))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};function G(t,i){if(t&1){let e=v();r(0,"li",7)(1,"a",8),x("click",function(){let l=m(e).$implicit,z=p();return f(z.openManual(l))}),h(),r(2,"svg",9),u(3,"path",10),n(),g(),r(4,"span",11),d(5),n()()()}if(t&2){let e=i.$implicit;s(5),O(" ",e.title," ")}}function B(t,i){t&1&&(r(0,"div",23)(1,"div",24),h(),r(2,"svg",25),u(3,"circle",26)(4,"path",27),n(),g(),r(5,"p",28),d(6," Cargando documento... "),n()()())}function $(t,i){if(t&1){let e=v();r(0,"div",29)(1,"div",30),h(),r(2,"svg",31),u(3,"path",32),n(),g(),r(4,"h3",33),d(5," Error al cargar el documento "),n(),r(6,"p",34),d(7," No se pudo cargar el documento PDF. Por favor, intenta nuevamente o contacta a soporte t\xE9cnico. "),n(),r(8,"button",35),x("click",function(){m(e);let l=p(2);return f(l.closePreview())}),d(9," Cerrar "),n()()()}}function Y(t,i){if(t&1){let e=v();r(0,"embed",36),x("load",function(){m(e);let l=p(2);return f(l.onPdfLoaded())})("error",function(){m(e);let l=p(2);return f(l.onPdfError())}),n()}if(t&2){let e=p(2);o("src",e.safeUrl,T)}}function q(t,i){if(t&1){let e=v();r(0,"div",12)(1,"div",13)(2,"div",14)(3,"h3",15),d(4," Vista previa del documento "),n(),r(5,"button",16),x("click",function(){m(e);let l=p();return f(l.closePreview())}),h(),r(6,"svg",17),u(7,"path",18),n()()(),g(),r(8,"div",19),b(9,B,7,0,"div",20)(10,$,10,0,"div",21)(11,Y,1,1,"embed",22),n()()()}if(t&2){let e=p();s(9),o("ngIf",e.isPdfLoading),s(),o("ngIf",e.pdfLoadError),s(),o("ngIf",!e.pdfLoadError)}}function J(t,i){t&1&&u(0,"app-loader",37),t&2&&o("message","Cargando...")}var j=class t{helpService=c(_);helperService=c(N);sanitizer=c(I);cdr=c(k);title="Manuales de ayuda";manuals=this.helpService.getManuals();isLoading=!1;isPdfLoading=!1;pdfLoadError=!1;showPreview=!1;currentPdfPath="";safeUrl=null;openManual(i){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.helpService.checkManual(i).subscribe({next:e=>{if(!e)return this.isLoading=!1,this.cdr.detectChanges(),void this.helperService.toastAlert({icon:"error",title:"No se pudo abrir el manual, archivo no encontrado"});this.isPdfLoading=!0,this.pdfLoadError=!1,this.currentPdfPath=i.path,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(i.path),this.showPreview=!0,this.cdr.detectChanges()},error:e=>{console.error(e),this.cdr.detectChanges(),this.helperService.toastAlert({icon:"error",title:"Algo sali\xF3 mal, intente de nuevo m\xE1s tarde"})}})},1500)}closePreview(){this.showPreview=!1,this.currentPdfPath="",this.safeUrl=null,this.isPdfLoading=!1,this.pdfLoadError=!1}onPdfLoaded(){this.isPdfLoading=!1,this.pdfLoadError=!1}onPdfError(){this.isPdfLoading=!1,this.pdfLoadError=!0,this.helperService.toastAlert({icon:"error",title:"No se pudo cargar el documento PDF"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-help"]],decls:7,vars:4,consts:[[3,"titleSection"],[1,"bg-white","rounded-lg","shadow-xl","max-w-3xl","mx-auto","p-6"],[1,"max-w-3xl","mx-auto"],[1,"text-lg","space-y-4"],["class","group",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 transition-opacity duration-300",4,"ngIf"],[3,"message",4,"ngIf"],[1,"group"],["href","javascript:void(0)",1,"flex","items-center","p-2","border","rounded-lg","hover:bg-green-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","text-gray-700","group-hover:text-green-600","transition-colors"],[1,"fixed","inset-0","bg-black","bg-opacity-60","z-50","flex","justify-center","items-center","p-4","transition-opacity","duration-300"],[1,"bg-white","rounded-lg","shadow-2xl","max-w-6xl","w-full","h-5/6","flex","flex-col","transform","transition-transform","duration-300"],[1,"flex","justify-between","items-center","p-4","border-b","bg-gray-50","rounded-t-lg"],[1,"text-xl","font-medium","text-gray-800"],["aria-label","Cerrar",1,"p-2","text-gray-500","hover:text-red-600","hover:bg-gray-100","rounded-full","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-grow","p-4","overflow-hidden","relative"],["class","absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10",4,"ngIf"],["class","absolute inset-0 flex items-center justify-center bg-white z-10",4,"ngIf"],["type","application/pdf","class","w-full h-full border border-gray-200 rounded","style","min-height: 500px",3,"src","load","error",4,"ngIf"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-white","bg-opacity-80","z-10"],[1,"text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-green-600","mx-auto","mb-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-gray-700","font-medium"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-white","z-10"],[1,"text-center","p-6","max-w-md"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","text-red-500","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-lg","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],[1,"px-4","py-2","bg-red-600","text-white","rounded","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors",3,"click"],["type","application/pdf",1,"w-full","h-full","border","border-gray-200","rounded",2,"min-height","500px",3,"load","error","src"],[3,"message"]],template:function(e,a){e&1&&(r(0,"app-panel",0)(1,"div",1)(2,"div",2)(3,"ul",3),b(4,G,6,1,"li",4),n()()(),b(5,q,12,3,"div",5)(6,J,1,1,"app-loader",6),n()),e&2&&(o("titleSection",a.title),s(4),o("ngForOf",a.manuals),s(),o("ngIf",a.showPreview),s(),o("ngIf",a.isLoading))},dependencies:[A,V,M,U,R],encapsulation:2})};export{j as HelpComponent};
